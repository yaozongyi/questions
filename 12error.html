<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>12ERROR</title>
    <style>
        body {
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
            margin: 0;
            background: #ffffff;
            color: #111
        }

        .wrap {
            max-width: 820px;
            margin: 0 auto;
            padding: 16px
        }

        .card {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, .08)
        }

        .row {
            display: flex;
            gap: 8px;
            align-items: center
        }

        h1 {
            font-size: 20px;
            margin: 0 8px 8px 0
        }

        .pill {
            display: inline-block;
            border: 1px solid #ccc;
            border-radius: 999px;
            padding: 6px 10px;
            font-size: 12px;
            color: #555
        }

        .progress {
            height: 8px;
            background: #eee;
            border-radius: 999px;
            overflow: hidden;
            margin: 10px 0 14px
        }

        .bar {
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, #22d3ee, #22c55e)
        }

        .q {
            font-size: 16px;
            line-height: 1.6;
            margin: 8px 0 10px
        }

        .opt {
            display: flex;
            gap: 8px;
            align-items: flex-start;
            background: #f9f9f9;
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 10px 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: border-color .15s, background .15s
        }

        .opt.correct {
            border-color: #22c55e;
            background: #e6f7ec
        }

        .opt.wrong {
            border-color: #ef4444;
            background: #fde8e8
        }

        .btns {
            display: flex;
            gap: 8px;
            margin-top: 10px
        }

        button {
            appearance: none;
            border: 1px solid #bbb;
            background: #f3f3f3;
            color: #111;
            border-radius: 8px;
            padding: 10px 12px;
            font-weight: 600;
            cursor: pointer
        }

        button.primary {
            background: #16a34a;
            border-color: #16a34a;
            color: #fff
        }

        button:disabled {
            opacity: .5;
            cursor: not-allowed
        }

        .muted {
            color: #777;
            font-size: 12px
        }

        .feedback {
            font-size: 14px;
            margin-top: 8px;
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            background: #fafafa
        }

        .feedback.ok {
            color: #0f5132;
            background: #e9f7ef;
            border-color: #badbcc
        }

        .feedback.err {
            color: #842029;
            background: #fcebea;
            border-color: #f5c2c7
        }
    </style>
</head>
<body>
<div class="wrap">
    <div class="card">
        <div class="row">
            <h1>12ERROR</h1>
            <span id="score" class="pill">得分：0</span>
            <span id="time" class="pill">时间：00:00</span>
        </div>
        <div class="progress">
            <div id="bar" class="bar"></div>
        </div>
        <div id="mount"></div>
        <div class="btns">
            <button id="prev">上一题</button>
            <button id="next" class="primary">下一题</button>
        </div>
    </div>
</div>

<!-- 题库内嵌：按这个格式增删题即可 -->
<script id="qdata" type="application/json">
    [
        {
            "id": "001",
            "type": "single",
            "prompt": "在供方选择过程中，项目经理拒绝了某供应商，因为他不具备相应的生产能力。这是哪种选择工具的例子？",
            "options": [
                {
                    "key": "A",
                    "text": "加权系统"
                },
                {
                    "key": "B",
                    "text": "专家判断"
                },
                {
                    "key": "C",
                    "text": "供应商评分系统"
                },
                {
                    "key": "D",
                    "text": "筛选系统"
                }
            ],
            "answer": "D",
            "explanation": "“筛选系统”用于在供应商选择初期阶段，先设定基本资格要求（如生产能力、资质、经验等），不满足这些最低条件的供应商直接被排除，不进入下一轮评估。"
        },
        {
            "id": "002",
            "type": "single",
            "prompt": "质量与等级不同，他们之间的基本区别是：",
            "options": [
                {
                    "key": "A",
                    "text": "等级是对功能特征相同但技术特征各异的产品或服务的一种分类"
                },
                {
                    "key": "B",
                    "text": "质量低通常不是问题，等级低则通常是个问题"
                },
                {
                    "key": "C",
                    "text": "确定并产出要求的质量标准不是项目经理和项目团队的职责"
                },
                {
                    "key": "D",
                    "text": "确定并产出要求的等级不是项目经理和项目团队的职责"
                }
            ],
            "answer": "A",
            "explanation": "质量（Quality）：指的是产品或服务满足要求的程度。质量高低代表“是否符合需求,等级（Grade）：指的是功能或技术特性不同层次的分类。"
        },
        {
            "id": "003",
            "type": "single",
            "prompt": "项目经理发现项目中有15条沟通渠道，那么项目的相关方数目是：",
            "options": [
                {
                    "key": "A",
                    "text": "15项目相关方"
                },
                {
                    "key": "B",
                    "text": "6项目相关方"
                },
                {
                    "key": "C",
                    "text": "8项目相关方"
                },
                {
                    "key": "D",
                    "text": "105项目相关方"
                }
            ],
            "answer": "A",
            "explanation": "沟通渠道的数目=n*(n-1)/2，反映了沟通的复杂度。6位项目项目相关方，6*5/2=15。"
        },
        {
            "id": "004",
            "type": "single",
            "prompt": "Randy管理的项目有8位项目相关方，他担心沟通渠道过多以致无法管理。你觉得，Randy需要计划多少条沟通渠道？",
            "options": [
                {
                    "key": "A",
                    "text": "64"
                },
                {
                    "key": "B",
                    "text": "56"
                },
                {
                    "key": "C",
                    "text": "8"
                },
                {
                    "key": "D",
                    "text": "28"
                }
            ],
            "answer": "A",
            "explanation": "n = 8, n * (n-1)/2 = 28."
        },
        {
            "id": "005",
            "type": "single",
            "prompt": "在制定项目进度表时，你要求每个人给出接下来3个月的计划休假清单，并将其应用于每位员工所负责的任务。这是：",
            "options": [
                {
                    "key": "A",
                    "text": "应用日历"
                },
                {
                    "key": "B",
                    "text": "调整提前期"
                },
                {
                    "key": "C",
                    "text": "进度差异"
                },
                {
                    "key": "D",
                    "text": "调整滞后期"
                }
            ],
            "answer": "A",
            "explanation": "资源日历规定了在项目期间特定的项目资源何时可用及可用多久。参考PMBOK Guide 6th p208."
        },
        {
            "id": "006",
            "type": "single",
            "prompt": "下列哪个说法不能由“逐步完善”这个术语来准确表述？",
            "options": [
                {
                    "key": "A",
                    "text": "项目范围变更"
                },
                {
                    "key": "B",
                    "text": "滚动式计划"
                },
                {
                    "key": "C",
                    "text": "对启动过程所开发的产品需求细节化"
                },
                {
                    "key": "D",
                    "text": "从化工厂设计图开发建筑结构图"
                }
            ],
            "answer": "A",
            "explanation": "资源日历规定了在项目期间特定的项目资源何时可用及可用多久。参考PMBOK Guide 6th p208."
        },
        {
            "id": "007",
            "type": "single",
            "prompt": "在风险监控过程中，风险负责人应当做什么？",
            "options": [
                {
                    "key": "A",
                    "text": "确定他/她需要监控什么风险"
                },
                {
                    "key": "B",
                    "text": "控制识别应对策略"
                },
                {
                    "key": "C",
                    "text": "通知项目经理所有过程中的纠正措施"
                },
                {
                    "key": "D",
                    "text": "通知项目利害干系人降低风险的新举措"
                }
            ],
            "answer": "C",
            "explanation": "确保相关干系人及时了解风险的状态变化和应对策略更新，从而共同降低风险影响。"
        },
        {
            "id": "008",
            "type": "single",
            "prompt": "配置状态审计是实施下列哪个过程的活动之一？",
            "options": [
                {
                    "key": "A",
                    "text": "监控项目工作"
                },
                {
                    "key": "B",
                    "text": "结束项目或阶段"
                },
                {
                    "key": "C",
                    "text": "收集需求"
                },
                {
                    "key": "D",
                    "text": "实施综合变更控制"
                }
            ],
            "answer": "D",
            "explanation": "配置管理活动包括：识别配置项、记录并报告配置项状态以及配置核实与审计。参考PMBOK Guide 6th p118."
        },
        {
            "id": "009",
            "type": "single",
            "prompt": "一组正式记载的程序，定义如何控制、变更及核准项目可交付成果及文件，是：",
            "options": [
                {
                    "key": "A",
                    "text": "授权系统"
                },
                {
                    "key": "B",
                    "text": "项目文档"
                },
                {
                    "key": "C",
                    "text": "变更控制委员会"
                },
                {
                    "key": "D",
                    "text": "变更控制系统"
                }
            ],
            "answer": "D",
            "explanation": "变更控制系统是一套程序，描述了如何管理和控制针对项目可交付成果和文档 的修改。参考PMBOK Guide 6th p699."
        },
        {
            "id": "010",
            "type": "single",
            "prompt": "作为敏捷教练 (SM)，你与与团队和产品负责人 (PO) 安排了一次会议来优化产品待办 (product backlog)。团队应在此次会议上做什么？",
            "options": [
                {
                    "key": "A",
                    "text": "估计和细化工作项"
                },
                {
                    "key": "B",
                    "text": "排列工作项优先顺序"
                },
                {
                    "key": "C",
                    "text": "添加功能到项目待办"
                },
                {
                    "key": "D",
                    "text": "识别修复"
                }
            ],
            "answer": "A",
            "explanation": "团队：估算 + 细化（How）、PO：排序 + 价值（What + Why）"
        },
        {
            "id": "011",
            "type": "single",
            "prompt": "你与一支希望成为敏捷的团队合作。职能经理问你看板和 Scrum 的区别。你会告诉他们什么?",
            "options": [
                {
                    "key": "A",
                    "text": "看板团队以冲刺或迭代为基础来规划工作"
                },
                {
                    "key": "B",
                    "text": "在看板中没有工作 (WIP) 限制"
                },
                {
                    "key": "C",
                    "text": "看板团队作为一个整体工作在一个项目上"
                },
                {
                    "key": "D",
                    "text": "看板团队采用拉取系统"
                }
            ],
            "answer": "D",
            "explanation": "Scrum：时间盒、冲刺、团队协作、推动式。Kanban：持续流动、WIP 限制、拉动系统（Pull System）。"
        },
        {
            "id": "012",
            "type": "single",
            "prompt": "在一次工作组会议期间，干系人提出了一个顾虑，表示正在开发的产品将在未来5个月内停产。你并不知道这一点，而项目预算已经批准到预定交付，也就是5个月。您下一步该怎么做?",
            "options": [
                {
                    "key": "A",
                    "text": "继续项目 - 停产产品不属于你的责任"
                },
                {
                    "key": "B",
                    "text": "与项目发起人举行会议，分享信息并建议终止项目"
                },
                {
                    "key": "C",
                    "text": "改变项目范围以满足不同的产品，使项目保持相关性"
                },
                {
                    "key": "D",
                    "text": "申请额外资金，看看是否可以改进产品而不是停产"
                }
            ],
            "answer": "D",
            "explanation": "Scrum：时间盒、冲刺、团队协作、推动式。Kanban：持续流动、WIP 限制、拉动系统（Pull System）。"
        },
        {
            "id": "013",
            "type": "single",
            "prompt": "在一次工作组会议期间，干系人提出了一个顾虑，表示正在开发的产品将在未来5个月内停产。你并不知道这一点，而项目预算已经批准到预定交付，也就是5个月。您下一步该怎么做?",
            "options": [
                {
                    "key": "A",
                    "text": "继续项目 - 停产产品不属于你的责任"
                },
                {
                    "key": "B",
                    "text": "与项目发起人举行会议，分享信息并建议终止项目"
                },
                {
                    "key": "C",
                    "text": "改变项目范围以满足不同的产品，使项目保持相关性"
                },
                {
                    "key": "D",
                    "text": "申请额外资金，看看是否可以改进产品而不是停产"
                }
            ],
            "answer": "B",
            "explanation": "产品将在交付前停产，意味着项目交付的成果可能没有商业价值。"
        }

    ]

</script>

<script>
    const STORAGE_KEY = 'quiz_inline_autojudge_v1';
    const QUESTIONS = JSON.parse(document.getElementById('qdata').textContent.trim());

    const state = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
    state.index ??= 0;
    state.answered ??= {};   // { id: 'A' }
    state.start ??= Date.now();

    const els = {
        mount: document.getElementById('mount'),
        bar: document.getElementById('bar'),
        score: document.getElementById('score'),
        time: document.getElementById('time'),
        prev: document.getElementById('prev'),
        next: document.getElementById('next')
    };

    function persist() {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    }

    function fmt(ms) {
        const s = Math.floor(ms / 1000);
        return String(Math.floor(s / 60)).padStart(2, '0') + ':' + String(s % 60).padStart(2, '0');
    }

    /*
        setInterval(() => {
            els.time.textContent = '时间：' + fmt(Date.now() - state.start);
        }, 1000);
    */
    function computeScore() {
        let sc = 0;
        for (const q of QUESTIONS) {
            if (state.answered[q.id] && state.answered[q.id] === q.answer) {
                sc++;
            }
        }
        return sc;
    }

    function render() {
        const q = QUESTIONS[state.index];
        els.bar.style.width = (state.index / QUESTIONS.length * 100) + '%';
        els.prev.disabled = state.index === 0;
        els.next.textContent = state.index === QUESTIONS.length - 1 ? '完成' : '下一题';
        els.score.textContent = '得分：' + computeScore();

        // 构建选项 HTML
        const optsHTML = q.options.map(o => `
      <label class="opt" data-opt="${o.key}">
        <input type="radio" name="opt" value="${o.key}" ${state.answered[q.id] === o.key ? 'checked' : ''}>
        <div><strong>${o.key}.</strong> ${o.text}</div>
      </label>
    `).join('');

        els.mount.innerHTML = `
      <div class="muted">第 ${state.index + 1} / ${QUESTIONS.length} 题 · 编号 ${q.id}</div>
      <div class="q">${q.prompt}</div>
      ${optsHTML}
      <div id="feedback" class="feedback" style="display:none"></div>
    `;

        // 如果已有选择，直接显示判定
        if (state.answered[q.id]) {
            showJudgement(q, state.answered[q.id], false);
        }

        // 绑定点击：即刻判题
        document.querySelectorAll('[data-opt]').forEach(el => {
            el.addEventListener('click', () => {
                const chosen = el.getAttribute('data-opt');
                state.answered[q.id] = chosen; // 记录当前选择
                persist();
                showJudgement(q, chosen, true); // 即时显示对/错
                els.score.textContent = '得分：' + computeScore(); // 实时更新得分
            });
        });
    }

    // 显示对错与提示
    function showJudgement(q, chosen, scrollIntoView) {
        // 清理状态
        document.querySelectorAll('.opt').forEach(o => o.classList.remove('correct', 'wrong'));
        const feedback = document.getElementById('feedback');
        feedback.classList.remove('ok', 'err');

        // 标颜色
        document.querySelectorAll('.opt').forEach(o => {
            const key = o.getAttribute('data-opt');
            if (key === q.answer) o.classList.add('correct');
            if (key === chosen && key !== q.answer) o.classList.add('wrong');
        });

        // 文案
        if (chosen === q.answer) {
            feedback.textContent = '✅ 正确';
            feedback.classList.add('ok');
            feedback.style.display = 'block';
        } else {
            feedback.textContent = q.explanation ? ('❌ 错误：' + q.explanation) : '❌ 错误';
            feedback.classList.add('err');
            feedback.style.display = 'block';
        }

        // 对移动端友好：可选滚动到反馈
        if (scrollIntoView) {
            feedback.scrollIntoView({behavior: 'smooth', block: 'nearest'});
        }
    }

    // 翻题
    els.prev.onclick = () => {
        if (state.index > 0) {
            state.index--;
            persist();
            render();
        }
    };
    els.next.onclick = () => {
        if (state.index < QUESTIONS.length - 1) {
            state.index++;
            persist();
            render();
        } else {
            els.bar.style.width = '100%';
            const total = QUESTIONS.length;
            const got = computeScore();
            els.mount.innerHTML = `
        <h2>完成！</h2>
        <p class="q">总分：${got} / ${total}</p>
        <button onclick="localStorage.removeItem('${STORAGE_KEY}'); location.reload()">重新开始</button>`;
            document.querySelector('.btns').style.display = 'none';
        }
    };

    render();
</script>
</body>
</html>
